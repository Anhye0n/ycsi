<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Expires" content=0>
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>YCSI</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!--css-->
    <link rel="stylesheet" href="./src/css/main.css">
    <link rel="stylesheet" href="./src/css/loader.css">
    <script type="text/javascript">
        function device_check() {
            // 디바이스 종류 설정
            const pc_device = "win16|win32|win64|mac|macintel";

            // 접속한 디바이스 환경
            const this_device = navigator.platform;
            const index_canvas = document.getElementById('output');

            if (this_device) {
                if (pc_device.indexOf(navigator.platform.toLowerCase()) < 0) {
                    index_canvas.style.width = screen.availWidth + 'px'
                    // 수정
                    // index_canvas.style.width = '320px'
                } else {
                    index_canvas.style.width = '640px'
                    // 수정
                    // index_canvas.style.width = '320px'
                }
            }
        }
    </script>
</head>

<body onload="setSize(); device_check();">
<div id="del_container">
    <div id="loading-container">
        <div class="loading"></div>
        <div id="loading-text">loading</div>
    </div>
    <!--<p id="link">Please wait for 7 seconds.</p>-->
    <p id="link">서버 개발자의 무능력으로 로딩이 오래걸립니다..</p>
    <p id="link_imogi">_:(´ཀ`」 ∠):_</p>
</div>
<div id="logo_container" style="display: none; text-align: center">
    <img id="logo" src="./src/img/kosslab_logo.png" alt="">
    <div id="logo_text">
        <p>공개SW개발자대회</p>
    </div>
</div>
<a id="move_content" href="#contents">
    <button id="move_button">YCSI 란</button>
</a>
<div id="canvas_box">
    <p class="warning" style="color: #000000; font-size: 1rem;">캔을 카메라에 보여주세요!</p>
    <p class="warning">※ 기능이 실행될 때까지 약간의 시간이 걸릴 수 있습니다.</p>
    <p class="warning">※ 카메라가 기다려도 켜지지 않는다면 카메라 허용 후 새로고침 해주세요!.</p>
    <canvas id="output"></canvas>
    <video id="video" style="display: none;"></video>
    <p id="update">Last Update : 2021-08-18</p>
    <p id="identify_big">인식 가능한 캔</p>
    <p id="identify_small">칠성사이다, 스프라이트, 코카콜라, 코카콜라 제로, 펩시, 포카리스웨트</p>
</div>
<div id="contents">
    <p class="big_text">과제명</p>
    <p class="small_text">시각장애인을 위한 캔음료 인식 및 음성안내 앱</p>
    <p class="big_text">팀</p>
    <p class="small_text">YCSI</p>
    <p class="big_text">팀원</p>
    <p class="small_text">김일중 (한양대 생명공학과 20학번)</p>
    <p class="small_text">안정현 (세종대 생명시스템학부 21학번)</p>
    <p class="big_text">추가 작성 중...</p>
    <p class="small_text">로렘 입숨 입니다.</p>
</div>
</body>
<!--<script src="https://docs.opencv.org/3.4/opencv.js"></script>-->
<script src="./tensor/opencv.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.8.0/dist/tf.min.js" defer></script>
<script type="text/javascript" defer>
    cv['onRuntimeInitialized'] = () => {
        src = new cv.Mat(height, width, cv.CV_8UC4);
        cap = new cv.VideoCapture("video");
        window.setInterval(function () {
            if (flag == true) {
                flag = false;
                process();
            }
        }, 100);
    };
</script>
<script src="./tensor/video.js" charset="UTF-8" defer></script>

<script type="text/javascript">
    setTimeout(function () {
        const container = document.getElementById('del_container');
        const logo = document.getElementById('logo_container');

        container.remove();
        logo.style.display = 'flex'
    }, 4500);
</script>
</html>